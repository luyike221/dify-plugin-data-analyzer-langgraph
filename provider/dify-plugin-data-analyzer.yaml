identity:
  author: "luyike"
  name: "dify-plugin-data-analyzer"
  label:
    en_US: "dify-plugin-data-analyzer"
    zh_Hans: "dify-plugin-data-analyzer"
    pt_BR: "dify-plugin-data-analyzer"
    ja_JP: "dify-plugin-data-analyzer"
  description:
    en_US: "Intelligent Excel Analysis API - Automated multi-level header processing and AI-powered data analysis with code generation and execution"
    zh_Hans: "Intelligent Excel Analysis API - Automated multi-level header processing and AI-powered data analysis with code generation and execution"
    pt_BR: "Intelligent Excel Analysis API - Automated multi-level header processing and AI-powered data analysis with code generation and execution"
    ja_JP: "Intelligent Excel Analysis API - Automated multi-level header processing and AI-powered data analysis with code generation and execution"
  icon: "icon.svg"

#########################################################################################
# LLM Configuration for Header Analysis
#########################################################################################
credentials_schema:
  - name: "llm_api_key"
    type: "secret-input"
    required: false
    label:
      en_US: "LLM API Key"
      zh_Hans: "LLM API密钥"
      pt_BR: "Chave API LLM"
      ja_JP: "LLM APIキー"
    placeholder:
      en_US: "Enter your OpenAI-compatible API key (optional, for header validation)"
      zh_Hans: "输入OpenAI兼容的API密钥（可选，用于表头验证）"
      pt_BR: "Digite sua chave de API compatível com OpenAI (opcional, para validação de cabeçalho)"
      ja_JP: "OpenAI互換のAPIキーを入力（オプション、ヘッダー検証用）"
    help:
      en_US: "API key for OpenAI-compatible LLM service. Used for intelligent header validation. Leave empty to use rule-based analysis only."
      zh_Hans: "OpenAI兼容的LLM服务API密钥。用于智能表头验证。留空则仅使用基于规则的分析。"
      pt_BR: "Chave de API para serviço LLM compatível com OpenAI. Usado para validação inteligente de cabeçalho. Deixe vazio para usar apenas análise baseada em regras."
      ja_JP: "OpenAI互換のLLMサービスのAPIキー。インテリジェントなヘッダー検証に使用。空欄の場合はルールベースの分析のみを使用。"
  - name: "llm_base_url"
    type: "text-input"
    required: false
    label:
      en_US: "LLM Base URL"
      zh_Hans: "LLM API地址"
      pt_BR: "URL Base LLM"
      ja_JP: "LLMベースURL"
    placeholder:
      en_US: "https://api.openai.com/v1/chat/completions"
      zh_Hans: "https://api.openai.com/v1/chat/completions"
      pt_BR: "https://api.openai.com/v1/chat/completions"
      ja_JP: "https://api.openai.com/v1/chat/completions"
    help:
      en_US: "Base URL for OpenAI-compatible LLM API. Default: https://api.openai.com/v1/chat/completions"
      zh_Hans: "OpenAI兼容的LLM API基础地址。默认：https://api.openai.com/v1/chat/completions"
      pt_BR: "URL base para API LLM compatível com OpenAI. Padrão: https://api.openai.com/v1/chat/completions"
      ja_JP: "OpenAI互換のLLM APIのベースURL。デフォルト：https://api.openai.com/v1/chat/completions"
    default: "https://api.openai.com/v1/chat/completions"
  - name: "llm_model"
    type: "text-input"
    required: false
    label:
      en_US: "LLM Model"
      zh_Hans: "LLM模型"
      pt_BR: "Modelo LLM"
      ja_JP: "LLMモデル"
    placeholder:
      en_US: "gpt-4o-mini"
      zh_Hans: "gpt-4o-mini"
      pt_BR: "gpt-4o-mini"
      ja_JP: "gpt-4o-mini"
    help:
      en_US: "Model name for LLM API. Default: gpt-4o-mini"
      zh_Hans: "LLM API的模型名称。默认：gpt-4o-mini"
      pt_BR: "Nome do modelo para API LLM. Padrão: gpt-4o-mini"
      ja_JP: "LLM APIのモデル名。デフォルト：gpt-4o-mini"
    default: "gpt-4o-mini"
  - name: "analysis_api_url"
    type: "text-input"
    required: true
    label:
      en_US: "Analysis API URL"
      zh_Hans: "数据分析API地址"
      pt_BR: "URL da API de Análise"
      ja_JP: "分析API URL"
    placeholder:
      en_US: "http://localhost:8118/v1/chat/completions"
      zh_Hans: "http://localhost:8118/v1/chat/completions"
      pt_BR: "http://localhost:8118/v1/chat/completions"
      ja_JP: "http://localhost:8118/v1/chat/completions"
    help:
      en_US: "OpenAI-compatible API URL for data analysis. Required. Example: http://localhost:8118/v1/chat/completions"
      zh_Hans: "用于数据分析的OpenAI兼容API地址。必填。示例：http://localhost:8118/v1/chat/completions"
      pt_BR: "URL da API compatível com OpenAI para análise de dados. Obrigatório. Exemplo: http://localhost:8118/v1/chat/completions"
      ja_JP: "データ分析用のOpenAI互換API URL。必須。例：http://localhost:8118/v1/chat/completions"
  - name: "analysis_model"
    type: "text-input"
    required: true
    label:
      en_US: "Analysis Model"
      zh_Hans: "分析模型"
      pt_BR: "Modelo de Análise"
      ja_JP: "分析モデル"
    placeholder:
      en_US: "DeepAnalyze-8B"
      zh_Hans: "DeepAnalyze-8B"
      pt_BR: "DeepAnalyze-8B"
      ja_JP: "DeepAnalyze-8B"
    help:
      en_US: "Model name for data analysis. Required. Example: DeepAnalyze-8B"
      zh_Hans: "用于数据分析的模型名称。必填。示例：DeepAnalyze-8B"
      pt_BR: "Nome do modelo para análise de dados. Obrigatório. Exemplo: DeepAnalyze-8B"
      ja_JP: "データ分析用のモデル名。必須。例：DeepAnalyze-8B"
  - name: "analysis_api_key"
    type: "secret-input"
    required: false
    label:
      en_US: "Analysis API Key"
      zh_Hans: "分析API密钥"
      pt_BR: "Chave API de Análise"
      ja_JP: "分析APIキー"
    placeholder:
      en_US: "Enter API key if required by your analysis API (optional)"
      zh_Hans: "如果分析API需要，请输入API密钥（可选）"
      pt_BR: "Digite a chave de API se necessário para sua API de análise (opcional)"
      ja_JP: "分析APIで必要な場合はAPIキーを入力（オプション）"
    help:
      en_US: "API key for analysis API if authentication is required. Optional, some APIs may not require it."
      zh_Hans: "如果分析API需要认证，请输入API密钥。可选，某些API可能不需要。"
      pt_BR: "Chave de API para API de análise se autenticação for necessária. Opcional, algumas APIs podem não exigir."
      ja_JP: "分析APIで認証が必要な場合のAPIキー。オプション、一部のAPIでは不要な場合があります。"
  - name: "analyzer_type"
    type: "select"
    required: false
    label:
      en_US: "Analyzer Type"
      zh_Hans: "分析器类型"
      pt_BR: "Tipo de Analisador"
      ja_JP: "アナライザータイプ"
    options:
      - value: "langgraph"
        label:
          en_US: "LangGraph (Recommended - Works with any LLM)"
          zh_Hans: "LangGraph（推荐 - 支持任意LLM）"
          pt_BR: "LangGraph (Recomendado - Funciona com qualquer LLM)"
          ja_JP: "LangGraph（推奨 - 任意のLLMで動作）"
      - value: "legacy"
        label:
          en_US: "Legacy (DeepAnalyze model required)"
          zh_Hans: "Legacy（需要DeepAnalyze模型）"
          pt_BR: "Legacy (Requer modelo DeepAnalyze)"
          ja_JP: "Legacy（DeepAnalyzeモデル必須）"
    default: "langgraph"
    help:
      en_US: "Choose the analyzer type. LangGraph works with any OpenAI-compatible LLM (GPT-4, Claude, etc.). Legacy requires the DeepAnalyze model."
      zh_Hans: "选择分析器类型。LangGraph 支持任意 OpenAI 兼容的 LLM（GPT-4、Claude 等）。Legacy 需要 DeepAnalyze 模型。"
      pt_BR: "Escolha o tipo de analisador. LangGraph funciona com qualquer LLM compatível com OpenAI (GPT-4, Claude, etc.). Legacy requer o modelo DeepAnalyze."
      ja_JP: "アナライザータイプを選択。LangGraphは任意のOpenAI互換LLM（GPT-4、Claudeなど）で動作。LegacyはDeepAnalyzeモデルが必要。"
  - name: "preprocessing_timeout"
    type: "text-input"
    required: false
    label:
      en_US: "Preprocessing Timeout (seconds)"
      zh_Hans: "预处理超时时间（秒）"
      pt_BR: "Tempo Limite de Pré-processamento (segundos)"
      ja_JP: "前処理タイムアウト（秒）"
    placeholder:
      en_US: "90"
      zh_Hans: "90"
      pt_BR: "90"
      ja_JP: "90"
    help:
      en_US: "Timeout for preprocessing stage (Excel processing and LLM validation). Default: 90 seconds"
      zh_Hans: "预处理阶段的超时时间（Excel处理和LLM验证）。默认：90秒"
      pt_BR: "Tempo limite para estágio de pré-processamento (processamento Excel e validação LLM). Padrão: 90 segundos"
      ja_JP: "前処理段階のタイムアウト（Excel処理とLLM検証）。デフォルト：90秒"
    default: 90
  - name: "analysis_timeout"
    type: "text-input"
    required: false
    label:
      en_US: "Analysis Timeout (seconds)"
      zh_Hans: "分析超时时间（秒）"
      pt_BR: "Tempo Limite de Análise (segundos)"
      ja_JP: "分析タイムアウト（秒）"
    placeholder:
      en_US: "360"
      zh_Hans: "360"
      pt_BR: "360"
      ja_JP: "360"
    help:
      en_US: "Timeout for analysis stage (AI data analysis with code generation and execution). Default: 360 seconds"
      zh_Hans: "分析阶段的超时时间（AI数据分析和代码生成执行）。默认：360秒"
      pt_BR: "Tempo limite para estágio de análise (análise de dados AI com geração e execução de código). Padrão: 360 segundos"
      ja_JP: "分析段階のタイムアウト（AIデータ分析とコード生成実行）。デフォルト：360秒"
    default: 360
  - name: "debug_print_execution_output"
    type: "boolean"
    required: false
    label:
      en_US: "Debug: Print Code Execution Output"
      zh_Hans: "调试：打印代码执行结果"
      pt_BR: "Depuração: Imprimir Saída de Execução de Código"
      ja_JP: "デバッグ：コード実行結果を出力"
    help:
      en_US: "If enabled, code execution output will be printed in the stream for debugging purposes. Default: enabled"
      zh_Hans: "如果启用，代码执行结果将在流式输出中打印，用于调试。默认：启用"
      pt_BR: "Se habilitado, a saída da execução do código será impressa no fluxo para fins de depuração. Padrão: habilitado"
      ja_JP: "有効にすると、デバッグ目的でコード実行結果がストリームに出力されます。デフォルト：有効"
    default: true
  - name: "debug_print_header_analysis"
    type: "boolean"
    required: false
    label:
      en_US: "Debug: Print Header Analysis LLM Response"
      zh_Hans: "调试：打印表头分析LLM响应"
      pt_BR: "Depuração: Imprimir Resposta LLM de Análise de Cabeçalho"
      ja_JP: "デバッグ：ヘッダー分析LLM応答を出力"
    help:
      en_US: "If enabled, the LLM response for header analysis will be printed in the stream for debugging purposes. Default: disabled"
      zh_Hans: "如果启用，表头分析的LLM响应将在流式输出中打印，用于调试。默认：禁用"
      pt_BR: "Se habilitado, a resposta LLM para análise de cabeçalho será impressa no fluxo para fins de depuração. Padrão: desabilitado"
      ja_JP: "有効にすると、デバッグ目的でヘッダー分析のLLM応答がストリームに出力されます。デフォルト：無効"
    default: false
  - name: "max_file_size_mb"
    type: "text-input"
    required: false
    label:
      en_US: "Maximum File Size (MB)"
      zh_Hans: "最大文件大小（MB）"
      pt_BR: "Tamanho Máximo do Arquivo (MB)"
      ja_JP: "最大ファイルサイズ（MB）"
    placeholder:
      en_US: "5"
      zh_Hans: "5"
      pt_BR: "5"
      ja_JP: "5"
    help:
      en_US: "Maximum allowed Excel file size in MB. Files larger than this will be rejected. Default: 5 MB"
      zh_Hans: "允许的最大Excel文件大小（MB）。超过此大小的文件将被拒绝。默认：5 MB"
      pt_BR: "Tamanho máximo permitido do arquivo Excel em MB. Arquivos maiores que isso serão rejeitados. Padrão: 5 MB"
      ja_JP: "許可される最大Excelファイルサイズ（MB）。このサイズを超えるファイルは拒否されます。デフォルト：5 MB"
    default: 5
  - name: "excel_processing_timeout"
    type: "text-input"
    required: false
    label:
      en_US: "Excel Processing Timeout (seconds)"
      zh_Hans: "Excel处理超时时间（秒）"
      pt_BR: "Tempo Limite de Processamento Excel (segundos)"
      ja_JP: "Excel処理タイムアウト（秒）"
    placeholder:
      en_US: "10"
      zh_Hans: "10"
      pt_BR: "10"
      ja_JP: "10"
    help:
      en_US: "Timeout for Excel file processing (file reading and parsing, before LLM analysis). If exceeded, will show 'Excel content too large or format too complex, parsing failed'. Default: 10 seconds"
      zh_Hans: "Excel文件处理超时时间（文件读取和解析，在LLM分析之前）。如果超时，将显示'Excel内容过多或格式太复杂，解析失败'。默认：10秒"
      pt_BR: "Tempo limite para processamento de arquivo Excel (leitura e análise do arquivo, antes da análise LLM). Se excedido, mostrará 'Conteúdo Excel muito grande ou formato muito complexo, análise falhou'. Padrão: 10 segundos"
      ja_JP: "Excelファイル処理のタイムアウト（ファイル読み込みと解析、LLM分析の前）。超過した場合、「Excelコンテンツが多すぎるか、形式が複雑すぎて、解析に失敗しました」と表示されます。デフォルト：10秒"
    default: 10

#########################################################################################
# If you want to support OAuth, you can uncomment the following code.
#########################################################################################
# oauth_schema:
#   client_schema:
#     - name: "client_id"
#       type: "secret-input"
#       required: true
#       url: https://example.com/oauth/authorize
#       placeholder:
#         en_US: "Please input your Client ID"
#         zh_Hans: "请输入你的 Client ID"
#         pt_BR: "Insira seu Client ID"
#       help:
#         en_US: "Client ID is used to authenticate requests to the example.com API."
#         zh_Hans: "Client ID 用于认证请求到 example.com API。"
#         pt_BR: "Client ID é usado para autenticar solicitações à API do example.com."
#       label:
#         zh_Hans: "Client ID"
#         en_US: "Client ID"
#     - name: "client_secret"
#       type: "secret-input"
#       required: true
#       url: https://example.com/oauth/authorize
#       placeholder:
#         en_US: "Please input your Client Secret"
#         zh_Hans: "请输入你的 Client Secret"
#         pt_BR: "Insira seu Client Secret"
#       help:
#         en_US: "Client Secret is used to authenticate requests to the example.com API."
#         zh_Hans: "Client Secret 用于认证请求到 example.com API。"
#         pt_BR: "Client Secret é usado para autenticar solicitações à API do example.com."
#       label:
#         zh_Hans: "Client Secret"
#         en_US: "Client Secret"
#   credentials_schema:
#     - name: "access_token"
#       type: "secret-input"
#       label:
#         zh_Hans: "Access Token"
#         en_US: "Access Token"

tools:
  - tools/dify-plugin-data-analyzer.yaml
extra:
  python:
    source: provider/dify-plugin-data-analyzer.py
